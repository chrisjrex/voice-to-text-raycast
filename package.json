{
  "$schema": "https://www.raycast.com/schemas/extension.json",
  "name": "voice-to-text",
  "title": "Voice-To-Text",
  "description": "Voice-to-text and Text-to-Speech with local models",
  "icon": "icon.png",
  "author": "rex",
  "categories": [
    "Productivity"
  ],
  "license": "MIT",
  "commands": [
    {
      "name": "toggle-dictation",
      "title": "Transcribe",
      "description": "Start/stop local voice-to-text recording",
      "mode": "no-view",
      "preferences": [
        {
          "name": "copyToClipboard",
          "type": "checkbox",
          "title": "Transcription Output",
          "description": "Copy transcribed text to clipboard",
          "default": true,
          "required": false,
          "label": "Copy to Clipboard"
        },
        {
          "name": "pasteToActiveApp",
          "type": "checkbox",
          "title": "",
          "description": "Paste transcribed text into the focused text field",
          "default": true,
          "required": false,
          "label": "Paste to Active App"
        },
        {
          "name": "saveHistory",
          "type": "checkbox",
          "title": "Save Transcription History",
          "description": "Save transcriptions to history for later review",
          "default": true,
          "required": false,
          "label": "Enable"
        },
        {
          "name": "silenceTimeout",
          "type": "textfield",
          "title": "Silence Timeout (seconds)",
          "description": "Auto-stop recording after this many seconds of silence. Set to 0 to disable.",
          "default": "15",
          "required": false
        }
      ]
    },
    {
      "name": "manage-models",
      "title": "Manage Models",
      "description": "View and download voice-to-text models",
      "mode": "view",
      "preferences": [
        {
          "name": "enablePiper",
          "type": "checkbox",
          "title": "TTS Engines",
          "label": "Piper (fast, CPU, CLI)",
          "description": "Enable Piper TTS engine. Requires: pip install piper-tts",
          "required": false,
          "default": true
        },
        {
          "name": "enableKokoro",
          "type": "checkbox",
          "label": "Kokoro (82M params, Python)",
          "description": "Enable Kokoro TTS engine. Requires: pip install kokoro",
          "required": false,
          "default": true
        }
      ]
    },
    {
      "name": "manage-post-processing",
      "title": "Manage Post-Processing",
      "description": "Configure AI-powered text processors for transcriptions",
      "mode": "view"
    },
    {
      "name": "manage-dictionary",
      "title": "Manage Dictionary",
      "description": "Manage protected terms that are preserved during AI post-processing",
      "mode": "view"
    },
    {
      "name": "transcription-history",
      "title": "Transcription History",
      "description": "View and manage past transcriptions",
      "mode": "view"
    },
    {
      "name": "read-aloud",
      "title": "Read Aloud",
      "description": "Read clipboard text aloud using Piper or Kokoro TTS",
      "mode": "no-view"
    },
    {
      "name": "tts-menu-bar",
      "title": "TTS Status",
      "description": "Shows TTS engine status and controls in the menu bar",
      "mode": "menu-bar",
      "interval": "1m",
      "preferences": [
        {
          "name": "kokoroIdleTimeout",
          "type": "textfield",
          "title": "Kokoro Idle Timeout (seconds)",
          "description": "Auto-shutdown the Kokoro server after this many seconds of inactivity. Set to 0 to disable.",
          "default": "120",
          "required": false
        }
      ]
    }
  ],
  "preferences": [
    {
      "name": "aiModel",
      "type": "dropdown",
      "title": "Post-Processing Model",
      "description": "AI model used for post-processing transcriptions. Requires Raycast AI (Pro).",
      "required": false,
      "default": "OpenAI_GPT-4o_mini",
      "data": [
        {
          "title": "GPT-4o Mini (default)",
          "value": "OpenAI_GPT-4o_mini"
        },
        {
          "title": "Gemini 3 Flash",
          "value": "Google_Gemini_3_Flash"
        },
        {
          "title": "Claude 4.5 Haiku",
          "value": "Anthropic_Claude_4.5_Haiku"
        }
      ]
    },
    {
      "name": "kokoroPythonPath",
      "type": "textfield",
      "title": "Kokoro Python Path",
      "description": "Python 3.10â€“3.12 with a dedicated venv for Kokoro (requires spacy/blis which don't support 3.13+)",
      "default": "~/.local/lib-kokoro/venv/bin/python3",
      "required": false
    },
    {
      "name": "pythonPath",
      "type": "textfield",
      "title": "Python Path [3.10+]",
      "description": "Python with mlx-whisper or parakeet-mlx installed. Used for speech-to-text transcription and Piper TTS",
      "default": "/opt/homebrew/bin/python3",
      "required": false
    },
    {
      "name": "soxPath",
      "type": "textfield",
      "title": "Sox Path [14.4+]",
      "description": "Sox is used for audio recording during voice transcription",
      "default": "/opt/homebrew/bin/sox",
      "required": false
    }
  ],
  "dependencies": {
    "@raycast/api": "^1.93.3",
    "@raycast/utils": "^1.17.0"
  },
  "devDependencies": {
    "@raycast/eslint-config": "^1.0.11",
    "@types/node": "22.13.4",
    "eslint": "^8.57.0",
    "typescript": "^5.7.3",
    "vitest": "^4.0.18"
  },
  "scripts": {
    "build": "ray build",
    "dev": "ray develop",
    "fix-lint": "ray lint --fix",
    "lint": "ray lint",
    "test": "vitest run",
    "test:watch": "vitest"
  },
  "version": ""
}
